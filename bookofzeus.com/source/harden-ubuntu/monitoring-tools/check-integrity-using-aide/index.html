<p>Aide is an integrity software that monitors app, or host-based intrusion detection system. This can be used to monitor unauthorized or unexpected changes made to the file-system on Ubuntu. AIDE can be run on-demand or automatically, like a cron job. </p>

<h2>Installing AIDE</h2>

<p>AIDE can be installed using this command:</p>
<pre>
sudo apt-get install aide
</pre>

<h4>Setup the database</h4>
<p>To make sure the database is setup properly, you need to initialize it using this command:</p>
<pre>
sudo aideinit
</pre>

<p>You should see something like this:</p>
<code><pre>
### AIDE database at /var/lib/aide/aide.db.new initialized
</pre></code>

<p class="note">This might take some times!</p>

<p>Make sure the new database is setup and itinialized properly:</p>
<pre>
cd /var/lib/aide/
ls -lt
</pre>
<p>You should see something like this:</p>
<code><pre>
total 21988
-rw------- 1 root root 11227321 Apr 12 16:25 aide.db
-rw------- 1 root root 11227321 Apr 12 16:25 aide.db.new
-rw-r--r-- 1 root root    49291 Apr 12 16:19 aide.conf.autogenerated
</pre></code>

<h3>configuration for Aide</h3>

<p>You alwasy can modify the /etc/aide.conf file to personalized or change default settings.</p>
<pre>
sudo vi /etc/aide/aide.conf
</pre>

<p>The default checksums is way too much and can be minimzed to avoid unnecessary loads on the system. <q>sha512</q> should be fine by itself, but you can add one more just in case. For example,
<code><pre>
Checksums = sha512+crc32
</pre></code>

<h3>Database</h3>
<p>Install the new generated database:</p>
<code><pre>
cp /var/lib/aide/aide.db.new /var/lib/aide/aide.db
</pre></code>

<h4>First run</h4>

<p>Let's run it for the first time using the <q>--check</q>. This will build the initial database.</p>
<pre>
sudo aide -c /etc/aide/aide.conf --check
</pre>

<p>This will output a bunch of information. At the end, you should see:</p>
<code><pre>
### All files match AIDE database. Looks okay!
</pre></code>

<h4>Test AIDE</h4>

<p>Let's test AIDE by creating a file in the <q>/usr/sbin/</q> folder.</p>
<pre>
touch /usr/sbin/aide-test-file.txt
</pre>

<h4>Run AIDE to detect the changes</h4>
<p>Now, AIDE should detect the new file created previously.</p>
<pre>
sudo aide --check
</pre>

<h3>Updating the database</h3>

<p>If you install new packages, update the system, or simply update an HTML file and want to make sure AIDE will save this information. You can run this command:</p>
<pre>
sudo aide --update
</pre>

<p>This will update the AIDE database. This is telling AIDE that the changes you made are <q>authorized</q> and are safe.</p>

<p>Make sure you rename the database again so it update the new changes. I recommend to rename the file using a filename convention like this:</p>
<code><pre>
mv aide.db.gz aide.db.gz-Dec082013
</pre></code>

<h3>Using AIDE with cron</h3>

<p>You can create your own script and automatically send you a report when AIDE is done.</p>
<pre>
cat /var/log/aide/chaide.sh
</pre>

<p>and paste the following code:</p>

<code><pre>
#!/bin/bash
now=`date +%Y-%m-%d`
filename="Aide-Report-$now.txt"
/bin/echo "Aide Report for $now" &gt; /tmp/$filename
/usr/sbin/aide --check &gt; /tmp/aide-check.txt
/bin/cat /tmp/aide-check.txt &gt;&gt; /tmp/$filename
/usr/bin/tail -n20 /tmp/aide-check.txt &gt;&gt; /tmp/$filename
/bin/echo "--- End of report ---------------------------------------------------" &gt; /tmp/$filename
/bin/mail -s"$filename $now" my-email@my-domain.com &lt; /tmp/$filename
</pre></code>

<p>Now, let's install this in the crontab.</p>
<pre>
sudo crontab -e
</pre>
<p>For example, if you like to run every day at 5 am, you can use this:</p>
<code><pre>
0 5 * * * /var/log/aide/chaide.sh
</pre></code>

